// a.hpp 
struct A {
    int a;
};

// b.hpp
struct B {
    int b;
};

// a.cpp
#include "a.hpp"
#include "b.hpp"
#include <iostream>
int main(){
    A a;
    B b;
    std::cout << "This is a test" << std::endl;
}

// b.cpp
#include "b.hpp"
B b;

------- $ mmpp
# Generated by github.com/da0x/mmpp
# Binary:
mmpp: .obj .obj/a.cpp.o .obj/b.cpp.o
	g++ -std=c++20 .obj/a.cpp.o .obj/b.cpp.o -o mmpp

.obj:
	mkdir .obj

.obj/a.cpp.o: a.cpp a.hpp b.hpp
	g++ -std=c++20 -o .obj/a.cpp.o -c a.cpp

.obj/b.cpp.o: b.cpp b.hpp
	g++ -std=c++20 -o .obj/b.cpp.o -c b.cpp

run: mmpp
	./mmpp

clean:
	rm -rfv .obj

install:
	sudo cp -v mmpp /usr/local/bin/

uninstall:
	sudo rm -v /usr/local/bin/mmpp
------- $ make
mkdir .obj
g++ -std=c++20 -o .obj/a.cpp.o -c a.cpp
g++ -std=c++20 -o .obj/b.cpp.o -c b.cpp
g++ -std=c++20 .obj/a.cpp.o .obj/b.cpp.o -o mmpp
------- $ make clean
rm -rfv .obj
.obj/a.cpp.o
.obj/b.cpp.o
.obj
------- $ ./mmpp
This is a test
